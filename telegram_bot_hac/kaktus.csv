import telebot
import csv
from Mytoken import token
from telebot import types
from parser import get_content
# from bs4 import BeautifulSoup
# import requests

bot = telebot.TeleBot(token)


inline_keyboard = types.InlineKeyboardMarkup()
btn1 = types.InlineKeyboardButton('Description', callback_data='description')
btn2 = types.InlineKeyboardButton('Numeration', callback_data='numeration')
inline_keyboard.add(btn1, btn2)

@bot.message_handler(commands=['start'])
def start(message):
    chat_id = message.chat.id
    bot.send_message(chat_id, 'Тебя приветсвует новостной бот', reply_markup=inline_keyboard)


@bot.callback_query_handler(func=lambda c: True)
def inline(c):
    if c.data == 'description':
        chat_id = c.message.chat.id
        description_keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
        msg = bot.send_message(chat_id, 'Ищу новости', reply_markup=description_keyboard)
        bot.register_next_step_handler(msg)
    if c.data == 'numeration':
        chat_id = c.message.chat.id
        numeration_keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
        msg = bot.send_message(chat_id,'Выберите', reply_markup=numeration_keyboard)
        bot.register_next_step_handler(msg, get_category_quit)


#
# def get_sum_costs(message):
#     chat_id = message.chat.id
#     entry.update({'sum': message.text})

    file_name = 'kaktus.csv'

    with open(file_name, 'a', encoding='utf-8') as f:
        writer = csv.writer(f)
        writer.writerow( (entry['inline']) )
    if c.data == 'Exit':
        chat_id = c.message.chat.id
        exit_keyboard = types.ReplyKeyboardMarkup(resize_keyboard=True, one_time_keyboard=True)
        msg = bot.send_message(chat_id, 'Досвидания', url, reply_markup=exit_keyboard)
        bot.register_next_step_handler(msg, get_category_quit)

bot.polling()